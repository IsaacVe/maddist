!function(){"use strict";var n,t,r=tinymce.util.Tools.resolve("tinymce.PluginManager"),e=function(n){return function(t){return typeof t===n}},o=function(n){return r=typeof(t=n),"string"===(null===t?"null":"object"===r&&(Array.prototype.isPrototypeOf(t)||t.constructor&&"Array"===t.constructor.name)?"array":"object"===r&&(String.prototype.isPrototypeOf(t)||t.constructor&&"String"===t.constructor.name)?"string":r);var t,r},u=e("boolean"),i=e("function"),c=e("number"),f=function(n){return function(){return n}},l=f(!1),a=f(!0),d=function(){return m},m={fold:function(n,t){return n()},isSome:l,isNone:a,getOr:t=function(n){return n},getOrThunk:n=function(n){return n()},getOrDie:function(n){throw new Error(n||"error: getOrDie called on none.")},getOrNull:f(null),getOrUndefined:f(void 0),or:t,orThunk:n,map:d,each:function(){},bind:d,exists:l,forall:a,filter:function(){return d()},toArray:function(){return[]},toString:f("none()")},s=function(n){var t=f(n),r=function(){return o},e=function(t){return t(n)},o={fold:function(t,r){return r(n)},isSome:a,isNone:l,getOr:t,getOrThunk:t,getOrDie:t,getOrNull:t,getOrUndefined:t,or:r,orThunk:r,map:function(t){return s(t(n))},each:function(t){t(n)},bind:e,exists:e,forall:e,filter:function(t){return t(n)?o:m},toArray:function(){return[n]},toString:function(){return"some("+n+")"}};return o},g={some:s,none:d,from:function(n){return null==n?m:s(n)}},h=function(n,t){for(var r=0,e=n.length;r<e;r++)t(n[r],r)},v=function(n){if(null==n)throw new Error("Node cannot be null or undefined");return{dom:n}},p=v,y=function(n,t){var r=n.dom;if(1!==r.nodeType)return!1;var e=r;if(void 0!==e.matches)return e.matches(t);if(void 0!==e.msMatchesSelector)return e.msMatchesSelector(t);if(void 0!==e.webkitMatchesSelector)return e.webkitMatchesSelector(t);if(void 0!==e.mozMatchesSelector)return e.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")};"undefined"!=typeof window?window:Function("return this;")();var w=function(n){return function(t){return function(n){return n.dom.nodeType}(t)===n}},S=w(1),N=w(3),b=w(9),O=w(11),T=function(n,t){n.dom.removeAttribute(t)},A=i(Element.prototype.attachShadow)&&i(Node.prototype.getRootNode)?function(n){return p(n.dom.getRootNode())}:function(n){return b(n)?n:p(n.dom.ownerDocument)},D=function(n){return p(n.dom.host)},k=function(n){var t=N(n)?n.dom.parentNode:n.dom;if(null==t||null===t.ownerDocument)return!1;var r,e,o,u,i,c=t.ownerDocument;return(o=p(t),i=A(o),O(u=i)&&null!=u.dom.host?g.some(i):g.none()).fold((function(){return c.body.contains(t)}),(r=k,e=D,function(n){return r(e(n))}))},C=function(n){return"rtl"===function(n,t){var r=n.dom,e=window.getComputedStyle(r).getPropertyValue(t);return""!==e||k(n)?e:function(n,t){return function(n){return void 0!==n.style&&i(n.style.getPropertyValue)}(n)?n.style.getPropertyValue(t):""}(r,t)}(n,"direction")?"rtl":"ltr"},M=function(n,t){return function(n,r){return function(n,t){for(var r=[],e=0,o=n.length;e<o;e++){var u=n[e];t(u,e)&&r.push(u)}return r}(function(n,t){for(var r=n.length,e=new Array(r),o=0;o<r;o++){var u=n[o];e[o]=t(u,o)}return e}(n.dom.childNodes,p),(function(n){return y(n,t)}))}(n)},R=function(n){return S(n)&&"li"===n.dom.nodeName.toLowerCase()},E=function(n,t){var r=n.selection.getSelectedBlocks();r.length>0&&(h(r,(function(n){var r,e=p(n),f=R(e),a=function(n,t){return(t?(r=n,e="ol,ul",function(n,t,r){for(var o=n.dom,u=i(r)?r:l;o.parentNode;){o=o.parentNode;var c=p(o);if(y(c,e))return g.some(c);if(u(c))break}return g.none()}(r,0,o)):g.some(n)).getOr(n);var r,e,o}(e,f);(r=a,function(n){return g.from(n.dom.parentNode).map(p)}(r).filter(S)).each((function(n){if(C(n)!==t?function(n,t,r){!function(n,t,r){if(!(o(r)||u(r)||c(r)))throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",r,":: Element ",n),new Error("Attribute value was not simple");n.setAttribute(t,r+"")}(n.dom,t,r)}(a,"dir",t):C(a)!==t&&T(a,"dir"),f){var r=M(a,"li[dir]");h(r,(function(n){return T(n,"dir")}))}}))})),n.nodeChanged())},L=function(n,t){return function(r){var e=function(n){var e=p(n.element);r.setActive(C(e)===t)};return n.on("NodeChange",e),function(){return n.off("NodeChange",e)}}};r.add("directionality",(function(n){!function(n){n.addCommand("mceDirectionLTR",(function(){E(n,"ltr")})),n.addCommand("mceDirectionRTL",(function(){E(n,"rtl")}))}(n),function(n){n.ui.registry.addToggleButton("ltr",{tooltip:"Left to right",icon:"ltr",onAction:function(){return n.execCommand("mceDirectionLTR")},onSetup:L(n,"ltr")}),n.ui.registry.addToggleButton("rtl",{tooltip:"Right to left",icon:"rtl",onAction:function(){return n.execCommand("mceDirectionRTL")},onSetup:L(n,"rtl")})}(n)}))}();